{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="filters">
    <ul>
        <li onclick="showDiv('ia',this)" class="filter selected">IA</li>
        <li onclick="showDiv('model',this)" class="filter">MODEL</li>
        <li onclick="showDiv('semester',this)" class="filter">SEMESTER</li>
    </ul>
</div>

{% comment %} IA {% endcomment %}
<div class="main-content" id="ia">
    {% for exam, data in IA.items %}
    {% if data %}
    <table>
        <thead>
            <tr>
                <td></td>
                <td>SUBJECT</td>
                <td>MARKS FOR 60</td>
                <td>MARKS FOR 100</td>
                <td>PASS / FAIL</td>
            </tr>
        </thead>
        <tbody>
            <td rowspan="0">{{exam}}</td>
            {% for result in data %}
            <tr>
                <td>{{result.subject.name}}</td>
                <td>{{result.marks}}</td>
                <td>
                    {% widthratio result.marks 1 100 as marks%}
                    {% widthratio marks 60 1 as marks%}
                    {{marks}}
                </td>
                <td>PASS</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% endfor %}
</div>

{% comment %} MODEL {% endcomment %}
<div class="main-content hidden" id="model">
    {% if MODEL %}
    <table>
        <thead>
            <tr>
                <td></td>
                <td>SUBJECT</td>
                <td>MARKS FOR 60</td>
                <td>MARKS FOR 100</td>
                <td>PASS / FAIL</td>
            </tr>
        </thead>
        <tbody>
            <td rowspan="0">MODEL</td>
            {% for result in MODEL %}
            <tr>
                <td>{{result.subject.name}}</td>
                <td>{{result.marks}}</td>
                <td>
                    {% widthratio result.marks 1 100 as marks%}
                    {% widthratio marks 60 1 as marks%}
                    {{marks}}
                </td>
                <td>PASS</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>

{% comment %} SEMESTER {% endcomment %}
<div class="main-content hidden" id="semester">
    {% for sem, data in SEMESTER.items %}
    {% if data %}
    <table>
        <thead>
            <tr>
                <td></td>
                <td>SUBJECT</td>
                <td>MARKS FOR 60</td>
                <td>MARKS FOR 100</td>
                <td>PASS / FAIL</td>
            </tr>
        </thead>
        <tbody>
            <td rowspan="0">{{sem}}</td>
            {% for result in data %}
            <tr>
                <td>{{result.subject.name}}</td>
                <td>{{result.marks}}</td>
                <td>
                    {% widthratio result.marks 1 100 as marks%}
                    {% widthratio marks 60 1 as marks%}
                    {{marks}}
                </td>
                <td>PASS</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% endfor %}
</div>

{% endblock content%}

{% block js %}
<script>
    function showDiv(divID, button) {
        var divs = document.querySelectorAll('.main-content');
        divs.forEach(function(div) {
            div.style.display = 'none';
        })

        document.getElementById(divID).style.display = 'block';

        var  filters = document.querySelectorAll('.filter');
        filters.forEach(function(filter) {
            filter.classList.remove('selected');
        })

        button.classList.add('selected')
    }
</script>
{% endblock js%}